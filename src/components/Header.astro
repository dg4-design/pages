---
import { Image } from 'astro:assets';
import Logo from './Logo.astro';
---

<header class="header">
  <div class="outside">
    <a href="/" class="logo">
      <Logo />
    </a>
    <div class="burger clickable">
      <svg class="line">
        <rect></rect>
        <rect></rect>
        <rect></rect>
      </svg>
    </div>
  </div>

  <div class="inside">
    <div class="white">
      <ul>
        <li>
          <a
            href="https://www.solid.dgdgdgdg.com/"
            class="external-link"
            target="_blank"
            rel="noopener noreferrer"
          >
            <div class="en">Solid Point</div>
            <div class="ja">Solid Point (共作チーム)</div>
          </a>
        </li>
        <li>
          <a
            href="https://www.apps.dgdgdgdg.com/"
            class="external-link"
            target="_blank"
            rel="noopener noreferrer"
          >
            <div class="en">dg4-apps</div>
            <div class="ja">dg4-apps</div>
          </a>
        </li>
      </ul>
    </div>
    <div class="cyan">
      <nav class="nav">
        <ul>
          <li>
            <a href="/about" class="header-link">
              <div class="en">About</div>
              <div class="ja">dgdgdgdgとは</div>
            </a>
          </li>
          <li>
            <a href="/works" class="header-link">
              <div class="en">Works</div>
              <div class="ja">作品紹介</div>
            </a>
          </li>
        </ul>
      </nav>
      <div class="link-wrapper">
        <ul>
          <li>
            <a
              href="https://www.solid.dgdgdgdg.com/"
              class="external-link"
              target="_blank"
              rel="noopener noreferrer"
            >
              <div class="en">Solid Point</div>
              <div class="ja">Solid Point (共作チーム)</div>
            </a>
          </li>
          <li>
            <a
              href="https://www.apps.dgdgdgdg.com/"
              class="external-link"
              target="_blank"
              rel="noopener noreferrer"
            >
              <div class="en">dg4-apps</div>
              <div class="ja">dg4-apps</div>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</header>

<style lang="scss">
  .header {
    display: flex;
    justify-content: flex-end;
  }

  .outside {
    position: fixed;
    z-index: 1000;
    display: flex;
    gap: 20px;
    align-items: center;

    @media (max-width: 768px) {
      padding-left: 12px;
    }
  }

  .logo {
    width: 150px;
    height: auto;

    @media (max-width: 768px) {
      width: 120px;
    }
  }

  .burger {
    display: grid;
    place-items: center;
    width: 90px;
    height: 90px;
    background-color: $dg4-cyan;

    @media (max-width: 768px) {
      width: 65px;
      height: 65px;
    }

    .line {
      position: relative;
      display: flex;
      width: 35px;
      height: 27px;

      @media (max-width: 768px) {
        width: 30px;
        height: 19px;
      }

      rect {
        position: absolute;
        width: 100%;
        height: 3px;
        fill: #fff;
        transition: all 0.2s;

        &:nth-of-type(1) {
          transform: translateY(0);
          &.is-open {
            transform: translateY(12px);
          }
        }
        &:nth-of-type(2) {
          transform: translateY(12px);
          &.is-open {
            opacity: 0;
          }
        }
        &:nth-of-type(3) {
          transform: translateY(24px);
          &.is-open {
            transform: translateY(12px);
          }
        }

        @media (max-width: 768px) {
          &:nth-of-type(1),
          &:nth-of-type(3) {
            &.is-open {
              transform: translateY(8px) rotate(45deg);
            }
          }
          &:nth-of-type(2) {
            transform: translateY(8px);
          }
          &:nth-of-type(3) {
            transform: translateY(16px);
            &.is-open {
              transform: translateY(8px) rotate(-45deg);
            }
          }
        }
      }
    }

    &:hover {
      .line rect {
        &:nth-of-type(1) {
          transform: translateY(6px);
        }
        &:nth-of-type(2) {
          visibility: hidden;
          opacity: 0;
        }
        &:nth-of-type(3) {
          transform: translateY(18px);
        }
      }

      @media (max-width: 768px) {
        .line rect {
          &:nth-of-type(1) {
            transform: translateY(4px);
          }
          &:nth-of-type(3) {
            transform: translateY(12px);
          }
        }
      }
    }
  }

  .inside {
    position: fixed;
    z-index: -999;
    display: flex;
    justify-content: space-between;
    width: 100%;
    transition: z-index 0s 0.2s;

    &.is-open {
      z-index: 999;
      height: 100vh;
      transition: z-index 0s;
    }
  }

  .white,
  .cyan {
    position: absolute;
    top: 0;
    height: 100vh;
    transition: all 0.2s;
  }

  .white {
    left: -60%;
    display: grid;
    place-items: center;
    width: 60%;
    background-color: #fff;

    &.is-open {
      left: 0;
    }

    ul {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
  }

  .cyan {
    right: 0;
    display: grid;
    place-items: center;
    width: 90px;
    height: 90px;
    background-color: $dg4-cyan;

    &.is-open {
      width: 40%;
      height: 100vh;
    }

    @media (max-width: 768px) {
      &.is-open {
        justify-content: normal;
        width: 100%;
        padding: 100px 0;
        overflow-y: auto;
      }
    }

    @media (max-width: 480px) {
      width: 65px;
      visibility: hidden;

      &.is-open {
        padding: 70px 0 170px;
        visibility: visible;
      }
    }
  }

  .nav,
  .link-wrapper {
    visibility: hidden;
    opacity: 0;

    &.is-open {
      visibility: visible;
      opacity: 1;
    }
  }

  .nav {
    @media (max-width: 768px) {
      width: 354px;
    }

    @media (max-width: 480px) {
      width: 284px;
    }
  }

  .link-wrapper {
    display: none;
    margin-top: 24px;

    @media (max-width: 768px) {
      display: block;
    }
  }

  .header-link {
    display: block;
    width: 100%;
    height: fit-content;
    padding: 10px 20px;
  }

  .en {
    margin-left: 2px;
    font-family: 'Dont-GR', sans-serif;
    font-size: 14px;
    font-variation-settings:
      'rnds' 0,
      'dtsz' 100;
    line-height: 14px;
    color: #fff;
    opacity: 0.5;
  }

  .ja {
    font-size: 24px;
    font-weight: bold;
    line-height: 35px;
    color: #fff;

    @media (max-width: 768px) {
      font-size: 20px;
    }
  }

  .external-link {
    position: relative;
    display: block;
    width: 360px;
    height: 80px;
    padding: 15px 20px;
    background-color: #fff;
    border: 3px solid $dg4-cyan;
    transition: all 0.3s;

    .en,
    .ja {
      position: relative;
      color: $dg4-cyan;
    }

    .en {
      opacity: 0.5;
    }

    .ja {
      width: fit-content;
      &::after {
        position: absolute;
        top: 0;
        right: -18px;
        bottom: 0;
        width: 13px;
        height: 13px;
        margin: auto 0;
        content: '';
        background: url('/images/icon-external.svg') no-repeat;
        background-size: contain;
      }
    }

    &::before {
      position: absolute;
      top: 0;
      left: 0;
      width: 0;
      height: 100%;
      content: '';
      background-color: $dg4-cyan;
      transition: all 0.3s;
    }

    &:hover {
      opacity: 1;

      &::before {
        width: 100%;
      }

      .en,
      .ja {
        color: #fff;
        transition: all 0.3s;
      }

      .ja::after {
        background-image: url('/images/icon-external-white.svg');
      }
    }

    @media (max-width: 768px) {
      width: 290px;
      height: 70px;
      padding: 10px 20px;
    }
  }
</style>

<script>
  const burger = document.querySelector('.burger');
  const inside = document.querySelector('.inside');
  const white = document.querySelector('.white');
  const cyan = document.querySelector('.cyan');
  const nav = document.querySelector('.nav');
  const linkWrapper = document.querySelector('.link-wrapper');
  const rects = document.querySelectorAll('.line rect');

  burger?.addEventListener('click', () => {
    inside?.classList.toggle('is-open');
    white?.classList.toggle('is-open');
    cyan?.classList.toggle('is-open');
    nav?.classList.toggle('is-open');
    linkWrapper?.classList.toggle('is-open');
    rects.forEach((rect) => rect.classList.toggle('is-open'));
  });
</script>
